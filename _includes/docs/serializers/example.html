class PostSerializer < ApplicationSerializer
  type 'foos'

  attribute :title

  attribute :description do
    @object.active? ? 'Active Post' : 'Inactive Post'
  end

  extra_attribute :net_worth do
    @object.assets.sum(&:value)
  end

  has_many :comments do
    data do
      @object.published_comments
    end

    link :related do
      @url_helpers.comments_url(filter: { post_id: @object.id })
    end
  end

  meta do
    { featured: true }
  end
end
